{
  "app-id": "com.airtame.Client",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "18.08",
  "sdk": "org.freedesktop.Sdk",
  "base": "io.atom.electron.BaseApp",
  "base-version": "18.08",
  "command": "airtame",
  "finish-args": [
    "--share=ipc",
    "--socket=x11",
    "--share=network"
  ],
  "modules": [
    {
      "name": "airtame",
      "buildsystem": "simple",
      "build-commands": [
        "install -D apply_extra /app/bin/apply_extra",
        "install -D airtame.sh /app/bin/airtame",
        "install -D com.airtame.Client.appdata.xml /app/share/metainfo/com.airtame.Client.appdata.xml",
        "install -D /usr/bin/ar /app/bin/ar",
        "ARCH_TRIPLE=$(gcc --print-multiarch) && cp /usr/lib/${ARCH_TRIPLE}/libbfd-*.so /app/lib"
      ],
      "sources": [
        {
          "type": "script",
          "dest-filename": "apply_extra",
          "commands": [
            "ar -x Airtame.deb data.tar.xz",
            "rm Airtame.deb",
            "tar -xf data.tar.xz",
            "rm data.tar.xz",
            "mv opt/Airtame .",
            "rmdir opt",
            "mkdir -p export/share/applications",
            "sed -e 's/Icon=.*/Icon=com.airtame.Client/' -e '\\$/opt/$d' usr/share/applications/airtame-application.desktop > export/share/applications/com.airtame.Client.desktop",
            "for size in 16 24 32 48 64 96 128 256 512 1024; do install -D usr/share/icons/hicolor/${size}x${size}/apps/airtame-application.png export/share/icons/hicolor/${size}x${size}/apps/com.airtame.Client.png; done",
            "rm -r usr"
          ]
        },
        {
          "type": "script",
          "dest-filename": "airtame.sh",
          "commands": [
            "exec /app/extra/Airtame/airtame-application \"$@\""
          ]
        },
        {
          "type": "file",
          "path": "com.airtame.Client.appdata.xml"
        },
        {
          "type": "extra-data",
          "filename": "Airtame.deb",
          "only-arches": [
            "x86_64"
          ],
          "url": "https://downloads-cdn.airtame.com/app/latest/linux/Airtame-3.5.0.deb",
          "sha256": "f4d2c0ec7d4f26f9a37853f7c0c885fe383e0b7b0114efe01a2df2ca09d5e063",
          "size": 45998056
        }
      ]
    }
  ]
}
